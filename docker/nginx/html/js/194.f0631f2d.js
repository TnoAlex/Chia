"use strict";(self["webpackChunkvue"]=self["webpackChunkvue"]||[]).push([[194],{6194:function(e,t,s){s.r(t),s.d(t,{default:function(){return E}});var r=s(6252),i=s(9963),a=s(5080);const o=e=>((0,r.dD)("data-v-88e53938"),e=e(),(0,r.Cn)(),e),n=o((()=>(0,r._)("head",null,[(0,r._)("meta",{charset:"utf-8"}),(0,r._)("meta",{content:"width=device-width, initial-scale=1.0",name:"viewport"}),(0,r._)("title",null,"忘记密码")],-1))),l={class:"container"},d={class:"section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4"},c={class:"container"},u={class:"row justify-content-center"},f={class:"col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center"},p={class:"d-flex justify-content-center py-4"},y=o((()=>(0,r._)("img",{src:a,alt:""},null,-1))),h=o((()=>(0,r._)("span",{class:"d-none d-lg-block"},"NiceCSP",-1))),m={class:"card mb-3"},b={class:"card-body"},A=o((()=>(0,r._)("div",{class:"pt-4 pb-2"},[(0,r._)("h5",{class:"card-title text-center pb-0 fs-4"},"找回密码"),(0,r._)("p",{class:"text-center small",style:{color:"#aaaaaa"}},"验证码将会发送至你的注册邮箱")],-1))),w={class:"row g-3 needs-validation",novalidate:""},B={class:"col-12",ref:"mail_address"},g={class:"col-12",ref:"code_input",style:{visibility:"hidden",display:"none"}},v={class:"col-12",ref:"password",style:{visibility:"hidden",display:"none"}},_={class:"col-12",ref:"repeat_password",style:{visibility:"hidden",display:"none"}},P={class:"col-12",ref:"next"},x={class:"col-12",style:{visibility:"hidden",display:"none"},ref:"submit_code"},F={class:"col-12",style:{visibility:"hidden",display:"none"},ref:"submit_password"},V={class:"col-12"},C={class:"small mb-0"};function U(e,t,s,a,o,U){const R=(0,r.up)("router-link");return(0,r.wg)(),(0,r.iD)(r.HY,null,[n,(0,r._)("body",null,[(0,r._)("main",null,[(0,r._)("div",l,[(0,r._)("section",d,[(0,r._)("div",c,[(0,r._)("div",u,[(0,r._)("div",f,[(0,r._)("div",p,[(0,r.Wm)(R,{class:"logo d-flex align-items-center w-auto",to:"/"},{default:(0,r.w5)((()=>[y,h])),_:1})]),(0,r._)("div",m,[(0,r._)("div",b,[A,(0,r._)("form",w,[(0,r._)("div",B,[(0,r.wy)((0,r._)("input",{ref:"mail_address_input",class:"form-control",name:"password",placeholder:"邮箱地址",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.emailAddress=e)},null,512),[[i.nr,o.emailAddress]])],512),(0,r._)("div",g,[(0,r.wy)((0,r._)("input",{type:"text",name:"code",class:"form-control",placeholder:"请输入验证码","onUpdate:modelValue":t[1]||(t[1]=e=>o.code=e)},null,512),[[i.nr,o.code]])],512),(0,r._)("div",v,[(0,r.wy)((0,r._)("input",{type:"password",name:"password",class:"form-control",placeholder:"请输入新密码","onUpdate:modelValue":t[2]||(t[2]=e=>o.newPassword=e)},null,512),[[i.nr,o.newPassword]])],512),(0,r._)("div",_,[(0,r.wy)((0,r._)("input",{type:"password",name:"password",class:"form-control",placeholder:"请输再次密码","onUpdate:modelValue":t[3]||(t[3]=e=>o.repeatPassword=e)},null,512),[[i.nr,o.repeatPassword]])],512),(0,r._)("div",P,[(0,r._)("button",{class:"btn btn-primary w-100",type:"button",ref:"next_button",onClick:t[4]||(t[4]=(...e)=>U.submitMailAddress&&U.submitMailAddress(...e))},"下一步",512)],512),(0,r._)("div",x,[(0,r._)("button",{class:"btn btn-primary w-100",type:"button",onClick:t[5]||(t[5]=(...e)=>U.submitCode&&U.submitCode(...e))},"确认")],512),(0,r._)("div",F,[(0,r._)("button",{class:"btn btn-primary w-100",type:"button",onClick:t[6]||(t[6]=(...e)=>U.submitPassword&&U.submitPassword(...e))},"确认")],512),(0,r._)("div",V,[(0,r._)("p",C,[(0,r.Wm)(R,{to:"/",style:{color:"#aaaaaa"}},{default:(0,r.w5)((()=>[(0,r.Uk)("返回登录")])),_:1})])])])])])])])])])])])])],64)}s(7658),s(2666);var R=s(2300),S=s(6133),Z={name:"forget_password",data(){return{emailAddress:"",code:"",newPassword:"",repeatPassword:"",type:""}},mounted(){this.type=this.$route.query.type},methods:{async submitMailAddress(){let e=this.$refs.next_button;e.disabled=!0,e.duration=60,e.timer=setInterval((()=>{const t=e.duration--;e.innerText=t+"秒后重新获取",t<=0&&(clearInterval(e.timer),e.duration=60,e.innerText="下一步",e.disabled=!1)}),1e3);let t=/^([a-zA-Z\d][\w-]{2,})@(\w{2,})\.([a-z]{2,})(\.[a-z]{2,})?$/;if(!t.test(this.emailAddress))return clearInterval(e.timer),e.duration=60,e.innerText="下一步",e.disabled=!1,void S.Z.messageBox("邮箱格式错误","error");await this.$axios.post("/forget/password/email/"+(0,R.s3)(this.emailAddress)).then((t=>{clearInterval(e.timer),e.duration=60,e.innerText="下一步",e.disabled=!1,this.$refs.next.style.visibility="hidden",this.$refs.next.style.display="none",this.$refs.submit_code.style.visibility="visible",this.$refs.submit_code.style.display="flex",this.$refs.mail_address_input.disabled=!0,this.$refs.code_input.style.visibility="visible",this.$refs.code_input.style.display="flex",403===t.data.code&&S.Z.messageBox(t.data.msg,"error")})).catch((e=>{S.Z.messageBox(e.data.msg,"error")}))},async submitCode(){await this.$axios.post("/verify/reset_code/validate/"+this.code).then((e=>{403===e.data.code?S.Z.messageBox(e.data.msg,"error"):(this.$refs.mail_address.style.visibility="hidden",this.$refs.mail_address.style.display="none",this.$refs.code_input.style.visibility="hidden",this.$refs.code_input.style.display="none",this.$refs.submit_code.style.visibility="hidden",this.$refs.submit_code.style.display="none",this.$refs.submit_password.style.visibility="visible",this.$refs.submit_password.style.display="flex",this.$refs.password.style.visibility="visible",this.$refs.password.style.display="flex",this.$refs.repeat_password.style.visibility="visible",this.$refs.repeat_password.style.display="flex")})).catch((e=>{S.Z.messageBox(e.data.msg,"error")}))},async submitPassword(){this.newPassword===this.repeatPassword?await this.$axios.post("/forget/password/rest",{newPassword:this.newPassword,code:this.code,type:this.type}).then((e=>{403===e.data.code&&S.Z.messageBox(e.data.msg,"error"),S.Z.messageBox("修改成功","success"),this.$router.push("/")})).catch((e=>{S.Z.messageBox(e.data.msg,"error")})):S.Z.messageBox("两次输入不匹配！","error")}}},$=s(3744);const j=(0,$.Z)(Z,[["render",U],["__scopeId","data-v-88e53938"]]);var E=j},5080:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAA0CAMAAAAUjyCdAAAAdVBMVEUAAABBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPFBVPF13w9vAAAAJnRSTlMA5ug59iGwkrLLzfp3Vu+/p5ZpKAy0fmVhSxbz69+gbwHW1IyKGU5/excAAAEBaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyI/PjxyOlJERiB4bWxuczpyPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj48cjpEZXNjcmlwdGlvbiB4bWxuczp4PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIj48eDpDcmVhdGVEYXRlPjIwMjEtMDUtMDRUMTM6MzQ6MDkrMDM6MDA8L3g6Q3JlYXRlRGF0ZT48L3I6RGVzY3JpcHRpb24+PC9yOlJERj48P3hwYWNrZXQgZW5kPSJyIj8+f9gwJQAAAOlJREFUSMft0MmOwjAQhOGCMAkzntjZyMa+9fs/IsECjIWSqITEif9Y0teHRgw2vWXFSjJSTEQyWkgNvyp0zf0WiRUq9kUq/S078UqiATHthCOM6AgrZJazQoLPipQW5W1aR482alAURmyJm9rZoEB7sFPolp8RgXzNCgSaFWgUK1DRAqXMSYHEsKKod5SwfcWYaApWbBJWRFLSQipaqIYVogNWyCRnhezbEfF08iQ2UwyL9P+RuU89or8FLcK3hGLFeckKxIoQjhDCkSn0+HcdscL8PffrdYRfbcUORNlVABxZgWyrwRZfAOrTnmyCT1ScAAAAAElFTkSuQmCC"},2300:function(e,t,s){s.d(t,{DS:function(){return L},s3:function(){return F}});const r="3.7.3",i=r,a="function"===typeof atob,o="function"===typeof btoa,n="function"===typeof Buffer,l="function"===typeof TextDecoder?new TextDecoder:void 0,d="function"===typeof TextEncoder?new TextEncoder:void 0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=Array.prototype.slice.call(c),f=(e=>{let t={};return e.forEach(((e,s)=>t[e]=s)),t})(u),p=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,y=String.fromCharCode.bind(String),h="function"===typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),m=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),b=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),A=e=>{let t,s,r,i,a="";const o=e.length%3;for(let n=0;n<e.length;){if((s=e.charCodeAt(n++))>255||(r=e.charCodeAt(n++))>255||(i=e.charCodeAt(n++))>255)throw new TypeError("invalid character found");t=s<<16|r<<8|i,a+=u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}return o?a.slice(0,o-3)+"===".substring(o):a},w=o?e=>btoa(e):n?e=>Buffer.from(e,"binary").toString("base64"):A,B=n?e=>Buffer.from(e).toString("base64"):e=>{const t=4096;let s=[];for(let r=0,i=e.length;r<i;r+=t)s.push(y.apply(null,e.subarray(r,r+t)));return w(s.join(""))},g=(e,t=!1)=>t?m(B(e)):B(e),v=e=>{if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?y(192|t>>>6)+y(128|63&t):y(224|t>>>12&15)+y(128|t>>>6&63)+y(128|63&t)}t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return y(240|t>>>18&7)+y(128|t>>>12&63)+y(128|t>>>6&63)+y(128|63&t)},_=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,P=e=>e.replace(_,v),x=n?e=>Buffer.from(e,"utf8").toString("base64"):d?e=>B(d.encode(e)):e=>w(P(e)),F=(e,t=!1)=>t?m(x(e)):x(e),V=e=>F(e,!0),C=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,U=e=>{switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),s=t-65536;return y(55296+(s>>>10))+y(56320+(1023&s));case 3:return y((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return y((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},R=e=>e.replace(C,U),S=e=>{if(e=e.replace(/\s+/g,""),!p.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,s,r,i="";for(let a=0;a<e.length;)t=f[e.charAt(a++)]<<18|f[e.charAt(a++)]<<12|(s=f[e.charAt(a++)])<<6|(r=f[e.charAt(a++)]),i+=64===s?y(t>>16&255):64===r?y(t>>16&255,t>>8&255):y(t>>16&255,t>>8&255,255&t);return i},Z=a?e=>atob(b(e)):n?e=>Buffer.from(e,"base64").toString("binary"):S,$=n?e=>h(Buffer.from(e,"base64")):e=>h(Z(e),(e=>e.charCodeAt(0))),j=e=>$(z(e)),E=n?e=>Buffer.from(e,"base64").toString("utf8"):l?e=>l.decode($(e)):e=>R(Z(e)),z=e=>b(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),M=e=>E(z(e)),W=e=>{if("string"!==typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},I=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),k=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,I(t));e("fromBase64",(function(){return M(this)})),e("toBase64",(function(e){return F(this,e)})),e("toBase64URI",(function(){return F(this,!0)})),e("toBase64URL",(function(){return F(this,!0)})),e("toUint8Array",(function(){return j(this)}))},D=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,I(t));e("toBase64",(function(e){return g(this,e)})),e("toBase64URI",(function(){return g(this,!0)})),e("toBase64URL",(function(){return g(this,!0)}))},T=()=>{k(),D()},L={version:r,VERSION:i,atob:Z,atobPolyfill:S,btoa:w,btoaPolyfill:A,fromBase64:M,toBase64:F,encode:F,encodeURI:V,encodeURL:V,utob:P,btou:R,decode:M,isValid:W,fromUint8Array:g,toUint8Array:j,extendString:k,extendUint8Array:D,extendBuiltins:T}}}]);
//# sourceMappingURL=194.f0631f2d.js.map